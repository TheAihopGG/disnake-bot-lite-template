# Disnake Bot Lite Template

Более миниатюрная версия шаблона для дискорд ботов на disnake с базой данных postgres.
## 1. О проекте

Этот шаблон призван ускорить процесс разработки за счёт готовой архитектуры.

## 2. Архитектура

### 2.1. Структура каталогов
```
├── bot
│   ├── cogs                    # Каталог, содержащий модули когов
│   │   └── my_cog.py           # Модуль, содержащий класс disnake.commands.Cog
│   ├── core                    # Каталог, содержащий базовые модули проекта
│   │   ├── config.py           # Модуль, содержащий конфигурацию бота
│   │   ├── embeds.py           # Модуль, содержащий классы disnake.Embed (для избежания дублирования)
│   │   ├── database.py         # Модуль, содержащий подключение к базе данных
│   │   ├── errors.py           # Модуль, содержащий классы-исключения
│   │   ├── modals.py           # Модуль, содержащий классы disnake.ui.Modal
│   │   ├── models.py           # Модуль, содержащий модели базы данных
│   │   ├── utils.py            # Модуль, содержащий утилиты
│   │   ├── views.py            # Модуль, содержащий содержащий классы 
│   │   └── logging.py          # Модуль, содержащий содержащий объект для логгирования
│   ├── repositories
│   │   └── my_repo.py          # Модуль, содержащий репозиторий
disnake.ui.View
│   ├── Dockerfile
│   ├── main.py                 # Модуль, запускающий бота
│   ├── migrations              # Каталог, содержащий файлы миграции
│   ├── poetry.lock             # Файл зависимостей poetry
│   ├── poetry.toml             # Файл конфигурации poetry
│   ├── prestart.sh             # Скрипт для выполнения миграций до запуска
│   ├── pyproject.toml          # Файл конфигурации проекта
│   ├── services                # Каталог, содержащий модули сервисов
│   │   └── my_service.py       # Модуль, содержащий функционал сервиса
│   ├── start.sh                # Скрипт для запуска
│   └── yoyo.ini                # Файл конфигурации yoyo
├── docker-compose-dev.yaml
├── env.template                # Шаблон для переменных окружения
├── LICENSE
└── README.md
```

### 2.2. Слои

- 1. Первый слой (точка входа)

  Отвечает за конфигурацию и деплой проекта.

- 1. Второй слой (коги)

  Взаимодействие с Discord API. Вызывает функции второго слоя для бизнес логики.

- 2. Третий слой (бизнес-логика)

  Сервисы. Работает с абстрактными данными. Не взаимодействует с Discord API. Работает с базой данных через функции третьего слоя.

- 3. Четвертый слой (репозитории)

  Работает напрямую с базой данных (инкапсулирует бд).

## 3. Запуск

### 3.1. Linux

1. Выполните, чтобы создать файл с переменными окружения (env)
  
    ```sh
    cp env.template .env
    ```

2. Заполните env файл соответствующими значениями ([документация по переменными окружения](/ENVIROMENT.md))
3. Для того чтобы запустить контейнер в режиме разработки:

    ```sh
    docker compose up --build -f <docker-конфигурация> 
    ```
